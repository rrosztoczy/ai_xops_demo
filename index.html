<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Master Library - Intelligence Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: #111111;
            color: #ffffff;
            overflow-x: hidden;
            position: relative;
            background-image:
                linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px);
            background-size: 40px 40px;
        }

        /* View management */
        .view {
            display: none;
            min-height: 100vh;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .view.active {
            display: block;
            opacity: 1;
        }


        .container {
            position: relative;
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .hero {
            text-align: center;
            margin-bottom: 60px;
        }

        .hero h1 {
            font-size: 3rem;
            font-weight: 700;
            color: #ffffff;
            letter-spacing: 0.5px;
            margin-bottom: 20px;
        }

        .hero p {
            font-size: 1.125em;
            color: rgba(255, 255, 255, 0.85);
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.5;
        }

        .intelligence-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 100px;
        }

        .product-card {
            background: #1e1e1e;
            border: 1px solid #333333;
            border-radius: 12px;
            padding: 24px;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
        }

        .product-card:hover {
            transform: translateY(-5px);
            border-color: #555555;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .product-card.active {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            border-color: #667eea;
        }

        .product-card.coming-soon {
            opacity: 0.7;
        }
        /* Disable hover effects on locked cards */
        .product-card.coming-soon:hover {
            transform: none;
            box-shadow: none;
        }

        .product-icon {
            width: 80px;
            height: 80px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5em;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .product-title {
            font-size: 2em;
            font-weight: 700;
            margin-bottom: 15px;
            color: #ffffff;
        }

        .product-description {
            color: rgba(255, 255, 255, 0.7);
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .product-status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: 600;
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.8);
        }

        .product-status.active {
            background: #4CAF50;
            color: #ffffff;
        }

        /* Meeting Intelligence View Styles */
        #meeting-view {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #333;
        }

        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 12px 24px;
            border-radius: 30px;
            cursor: pointer;
            z-index: 1000;
            transition: all 0.3s ease;
            font-size: 1em;
            font-weight: 600;
        }

        .back-button:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(-5px);
        }

        .workflow-header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
            padding-top: 80px;
        }

        .workflow-header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .workflow-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
            margin-bottom: 40px;
        }

        .node {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .node:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.15);
            border-color: #4CAF50;
        }

        /* Disable hover for disabled nodes */
        .node.disabled:hover {
            transform: none;
            box-shadow: none;
        }
        .node.disabled {
            cursor: default;
        }

        .node.trigger {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
        }

        .node.extract {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border: none;
        }

        .node.branch {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            color: #333;
            border: none;
        }

        .node.filter {
            background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);
            color: white;
            border: none;
        }

        .node-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .node-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 20px;
        }

        .node-title {
            font-size: 1.2em;
            font-weight: 600;
        }

        .connection-line {
            width: 2px;
            height: 40px;
            background: #ccc;
            margin: 0 auto;
            position: relative;
        }

        .connection-line::after {
            content: '▼';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            color: #ccc;
        }

        /* Detail Panel Styles */
        .detail-panel {
            position: fixed;
            right: -500px;
            top: 0;
            width: 500px;
            height: 100%;
            background: white;
            box-shadow: -10px 0 30px rgba(0,0,0,0.1);
            transition: right 0.3s ease;
            z-index: 1000;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .detail-panel.show {
            right: 0;
        }

        .detail-header {
            padding: 20px;
            background: #f5f5f5;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }

        .detail-content {
            padding: 20px;
            flex-grow: 1;
            overflow-y: auto;
            color: #333;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }

        .param-item {
            margin-bottom: 15px;
            padding: 10px;
            background: #f8f8f8;
            border-radius: 8px;
        }

        .param-key {
            font-weight: 600;
            color: #2196F3;
            margin-bottom: 5px;
        }

        .param-value {
            font-size: 0.9em;
            color: #666;
            word-break: break-word;
        }

        .legend {
            position: fixed;
            top: 100px;
            right: 20px;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            z-index: 100;
        }

        .legend h3 {
            margin-bottom: 15px;
            font-size: 1.1em;
            color: #333;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            color: #333;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            margin-right: 10px;
        }

        .branch-container {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .branch-path {
            flex: 1;
            min-width: 250px;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            border: 2px dashed #ccc;
        }

        .path-label {
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #333;
        }

        .path-emoji {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            font-weight: bold;
        }

        .node.subzap {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            color: #333;
            border: none;
        }

        .node-subtitle {
            font-size: 0.9em;
            opacity: 0.8;
            margin-top: 5px;
        }

        /* Mobile responsiveness */
        @media (max-width: 768px) {
            .hero h1 { font-size: 3em; }
            .hero p { font-size: 1.2em; }
            .intelligence-grid { grid-template-columns: 1fr; }
            .back-button { top: 10px; left: 10px; font-size: 0.9em; }
            .detail-panel {
                width: 100%;
                right: -100%;
            }
            .legend {
                position: static;
                margin-bottom: 20px;
            }
            .branch-container {
                flex-direction: column;
            }
        }

        /* Component Sections */
        .component-section {
            margin-bottom: 60px;
        }
        .component-section h2 {
            font-size: 1.75em;
            margin-bottom: 16px;
            color: #ffffff;
        }

        /* Scrollable component cards */
.scroll-cards {
    display: flex;
    flex-direction: column;
    gap: 20px;
    overflow-y: auto;
    overflow-x: hidden;
    max-height: 60vh;
    padding-bottom: 20px;
}
.scroll-cards::-webkit-scrollbar { display: none; }
        /* Vertical workflow cards: icons on right */
        .scroll-cards .product-card {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .scroll-cards .product-card .product-icon {
            order: 2;
            margin-left: 20px;
        }
        .scroll-cards .product-card .product-title,
        .scroll-cards .product-card .product-status {
            order: 1;
        }

        /* Background Orbs */
        .orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(100px);
            opacity: 0.4;
            pointer-events: none;
        }
        .orb1 {
            width: 300px;
            height: 300px;
            background: radial-gradient(circle at center, #4b6cb7, #182848);
            top: 10%;
            left: 5%;
        }
        .orb2 {
            width: 400px;
            height: 400px;
            background: radial-gradient(circle at center, #feb47b, #ff7e5f);
            bottom: 10%;
            right: 10%;
        }
        /* Login button */
        .login-button {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            color: #ffffff;
            padding: 10px 20px;
            border-radius: 4px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            z-index: 1000;
            transition: background 0.3s ease;
        }

        .login-button:hover {
            background: rgba(255,255,255,0.2);
        }

        /* Hero section */
        .hero-section {
            position: relative;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .hero-section .hero h1 {
            font-size: 4rem;
        }

        .hero-section .hero p {
            font-size: 1.25rem;
            max-width: 800px;
        }

        /* Hero links for library sections */
        .hero-links {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 20px;
            position: relative;
        }
        .hero-link,
        .hero-locked {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #ffffff;
            text-decoration: none;
            font-size: 1.125rem;
            font-weight: 500;
            cursor: pointer;
            transition: opacity 0.3s ease;
        }
        .hero-link:hover,
        .hero-locked:hover {
            opacity: 0.8;
        }
        .hero-icon {
            margin-top: 8px;
            font-size: 1.5rem;
        }

        /* Cards for hero options */
        .hero-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            padding: 20px;
            min-width: 140px;
            text-align: center;
            transition: transform 0.2s ease;
        }
        .hero-card:hover {
            transform: translateY(-5px);
        }

        /* Color variants for hero cards */
        .hero-card.automation {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .hero-card.knowledge {
            background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);
        }
        .hero-card.applications {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }

        /* Organizer wrapper for hero links */
        .hero-organizer {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px 40px;
            border-radius: 12px;
            margin-top: 30px;
        }

        /* Primary CTA to scroll to library */
        /* Primary CTA to scroll to library */
        .view-library-cta {
            display: none;
            position: fixed;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: 600;
            color: #ffffff;
            text-decoration: none;
            z-index: 1000;
            animation: float-arrow 2s ease-in-out infinite;
        }
        .view-library-cta:hover {
            opacity: 0.8;
        }

        @keyframes float-arrow {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-10px); }
        }

        /* Only show CTA when on landing view */
        #landing-view .view-library-cta {
            display: inline-flex;
        }

        /* Scrollable library container (below hero) */
        #library {
            overflow-y: auto;
            padding: 0 20px 20px;
        }

        /* Roadmap spotlight */
        .roadmap-section .roadmap-spotlight {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 60px 0;
            opacity: 0.4;
            filter: grayscale(100%);
            cursor: default;
        }
        .roadmap-section .roadmap-icon {
            font-size: 6rem;
        }
        .roadmap-section .roadmap-title {
            font-size: 2rem;
            color: rgba(255,255,255,0.85);
            font-weight: 600;
            margin-top: 10px;
        }

        /* Login prompt modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }
        .modal.hidden {
            display: none;
        }
        .modal-content {
            background: #222;
            color: #fff;
            padding: 40px 50px;
            border-radius: 12px;
            position: relative;
            text-align: center;
            max-width: 400px;
            width: 80%;
        }
        .modal-close {
            position: absolute;
            top: 10px;
            right: 14px;
            cursor: pointer;
            font-size: 1.5rem;
            line-height: 1;
        }

        .modal-content p {
            font-size: 1.25rem;
            margin: 0;
            line-height: 1.4;
        }

        .modal-login-button {
            margin-top: 20px;
            padding: 10px 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 4px;
            color: #ffffff;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: opacity 0.3s ease;
        }
        .modal-login-button:hover {
            opacity: 0.85;
        }

        /* Highlighted node pulse effect */
        .node.highlight {
            position: relative;
            border-color: #FFEB3B !important;
            animation: pulse-border 1s ease-in-out infinite;
        }
        @keyframes pulse-border {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255,235,59,0.7); }
            50% { box-shadow: 0 0 0 12px rgba(255,235,59,0); }
        }

        /* Click prompt indicator */
        .click-prompt {
            position: absolute;
            top: -28px;
            left: 50%;
            transform: translateX(-50%);
            background: #FFEB3B;
            color: #000;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.9rem;
            font-weight: 600;
            pointer-events: none;
            animation: bounce 1s infinite;
        }
        @keyframes bounce {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-6px); }
        }

        /* Lock overlay for locked sub-zap cards */
        .lock-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 12px;
        }
        .lock-icon {
            font-size: 32px;
            margin-bottom: 8px;
        }
        /* Overlay to highlight Infer Metadata node */
        .focus-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            /* darker overlay to better dim the background */
            background: rgba(0, 0, 0, 0.7);
            /* sit below legend (z-index:100) but above rest of content */
            z-index: 50;
        }

        /* Blur and gray out inactive subcomponents */
        .blurred-node {
            filter: blur(4px) grayscale(100%);
            opacity: 0.5;
            pointer-events: none;
        }
</style>
</head>
<body>
    <!-- Landing View -->
    <div id="landing-view" class="view active">
        <!-- Background Orbs -->
        <div class="orb orb1"></div>
        <div class="orb orb2"></div>

        <button class="login-button">Log In</button>

        <section class="hero-section">
            <div class="hero">
                <h1>Master Library</h1>
                <p>Your comprehensive intelligence platform for transforming conversations and work into actionable insights</p>
                <div class="hero-organizer">
                    <div class="hero-links">
                        <div class="hero-card automation">
                            <a href="#library" class="hero-link">
                                Automation
                                <span class="hero-icon">🤖</span>
                            </a>
                        </div>
                        <div class="hero-card knowledge">
                            <div class="hero-locked">
                                Knowledge
                                <span class="hero-icon">🔒</span>
                            </div>
                        </div>
                        <div class="hero-card applications">
                            <div class="hero-locked">
                                Applications
                                <span class="hero-icon">🔒</span>
                            </div>
                        </div>
                    </div>
                </div>
                <a href="#library" class="view-library-cta" onclick="this.style.display='none'">
                    ↓ View the library
                </a>
            </div>
        </section>

        <div class="container" id="library">

            <section class="component-section roadmap-section">
                <div class="roadmap-spotlight" onclick="showLoginModal()">
                    <div class="roadmap-icon">🗺️</div>
                    <h3 class="roadmap-title">Roadmap <span class="product-status">🔒</span></h3>
                </div>
            </section>

            <section class="component-section">
                <h2>Workflows</h2>
                <div class="scroll-cards">
            <div class="product-card active" onclick="navigateToView('meeting-view')">
                <div class="product-icon">👥</div>
                        <h3 class="product-title">Meeting Intelligence</h3>
                        <span class="product-status active">View workflow</span>
                    </div>
                    <div class="product-card coming-soon">
                        <div class="product-icon">👤</div>
                        <h3 class="product-title">Work Intelligence</h3>
                        <span class="product-status">🔒</span>
                    </div>
                    <div class="product-card coming-soon">
                        <div class="product-icon">💬</div>
                        <h3 class="product-title">Async Intelligence</h3>
                        <span class="product-status">🔒</span>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- Vision View -->
    <div id="vision-view" class="view">
        <button class="back-button" onclick="navigateToView('landing-view')">
            ← Back to Master Library
        </button>
        <div class="container">
            <h1>Vision</h1>
            <p>Strategic overview of the automation platform</p>
        </div>
    </div>

    <!-- Roadmap View -->
    <div id="roadmap-view" class="view">
        <button class="back-button" onclick="navigateToView('landing-view')">
            ← Back to Master Library
        </button>
        <div class="container">
            <h1>Roadmap</h1>
            <p>Overview of upcoming features (locked until login)</p>
        </div>
    </div>

    <!-- Meeting Intelligence View -->
    <div id="meeting-view" class="view">
        <button class="back-button" onclick="navigateToView('landing-view')">
            ← Back to Master Library
        </button>
        
        <div class="legend">
            <h3>Node Types</h3>
            <div class="legend-item">
                <div class="legend-color" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);"></div>
                <span>Trigger</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);"></div>
                <span>Data Extraction</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);"></div>
                <span>Branch</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);"></div>
                <span>Filter</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);"></div>
                <span>Sub-Zap</span>
            </div>
        </div>
        
        <div class="container">
            <div class="workflow-header">
                <h1>Meeting Intelligence</h1>
                <p>Interactive documentation for automated meeting transcript processing</p>
            </div>

            <div class="workflow-container">
                <!-- Trigger Node -->
                <div class="node trigger" data-node-id="1">
                    <div class="node-header">
                        <div class="node-icon">🎯</div>
                        <div>
                            <div class="node-title">New Audio Transcript</div>
                            <div class="node-subtitle">Zoom Meeting Trigger</div>
                        </div>
                    </div>
                </div>

                <div class="connection-line"></div>

                <!-- Extract Metadata Node -->
                <div class="node extract" data-node-id="2">
                    <div class="node-header">
                        <div class="node-icon">🤖</div>
                        <div>
                            <div class="node-title">Infer Metadata</div>
                            <div class="node-subtitle">ChatGPT Analysis</div>
                        </div>
                    </div>
                </div>

                <div class="connection-line"></div>

                <!-- Branch Node -->
                <div class="node branch" data-node-id="3">
                    <div class="node-header">
                        <div class="node-icon">🔀</div>
                        <div>
                            <div class="node-title">Team-Based Routing</div>
                            <div class="node-subtitle">Branch by Team Type</div>
                        </div>
                    </div>
                </div>

                <!-- Team Branches -->
                <div class="branch-container">
                    <div class="branch-path">
                        <div class="path-label">
                            <div class="path-emoji" style="background: #4A90E2; color: white;">A</div>
                            Business Operations
                        </div>
                        <div class="node filter" data-node-id="4">
                            <div class="node-header">
                                <div class="node-icon">🏢</div>
                                <div>
                                    <div class="node-title">Business Operations Filter</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="branch-path">
                        <div class="path-label">
                            <div class="path-emoji" style="background: #7CB342; color: white;">C</div>
                            Leadership & Strategy
                        </div>
                        <div class="node filter" data-node-id="5">
                            <div class="node-header">
                                <div class="node-icon">📊</div>
                                <div>
                                    <div class="node-title">Leadership Filter</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="branch-path">
                        <div class="path-label">
                            <div class="path-emoji" style="background: #FDD835; color: #333;">D</div>
                            Product & Technology
                        </div>
                        <div class="node filter" data-node-id="6">
                            <div class="node-header">
                                <div class="node-icon">💻</div>
                                <div>
                                    <div class="node-title">Product & Tech Filter</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Second row of branches -->
                <div class="branch-container">
                    <div class="branch-path">
                        <div class="path-label">
                            <div class="path-emoji" style="background: #FF7043; color: white;">E</div>
                            Revenue Operations
                        </div>
                        <div class="node filter" data-node-id="7">
                            <div class="node-header">
                                <div class="node-icon">💰</div>
                                <div>
                                    <div class="node-title">Revenue Ops Filter</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="connection-line"></div>
                        
                        <!-- Internal/External Branch -->
                        <div class="node branch" data-node-id="10">
                            <div class="node-header">
                                <div class="node-icon">🔀</div>
                                <div>
                                    <div class="node-title">Internal/External Branch</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Sub-branches for Internal/External -->
                        <div style="display: flex; gap: 10px; margin-top: 10px;">
                            <div style="flex: 1;">
                                <div class="node filter" data-node-id="11" style="transform: scale(0.9);">
                                    <div class="node-header">
                                        <div class="node-icon">🌐</div>
                                        <div>
                                            <div class="node-title">External</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Sales/CS/Other branches -->
                                <div style="margin-top: 10px;">
                                    <div class="node subzap" data-node-id="15" style="transform: scale(0.8); margin-bottom: 10px;">
                                        <div class="node-header">
                                            <div class="node-icon">💼</div>
                                            <div>
                                                <div class="node-title">Sales Flow</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="connection-line" style="height: 20px;"></div>
                                    
                                    <div class="node subzap" data-node-id="22" style="transform: scale(0.8); margin-bottom: 10px;">
                                        <div class="node-header">
                                            <div class="node-icon">📊</div>
                                            <div>
                                                <div class="node-title" style="font-size: 0.9em;">Revenue Ops Metadata</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="connection-line" style="height: 20px;"></div>
                                    
                                    <div class="node subzap" data-node-id="23" style="transform: scale(0.8); margin-bottom: 10px;">
                                        <div class="node-header">
                                            <div class="node-icon">💰</div>
                                            <div>
                                                <div class="node-title" style="font-size: 0.9em;">Sales Metadata</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="connection-line" style="height: 20px;"></div>
                                    
                                    <div class="node extract" data-node-id="24" style="transform: scale(0.8); margin-bottom: 10px;">
                                        <div class="node-header">
                                            <div class="node-icon">📈</div>
                                            <div>
                                                <div class="node-title" style="font-size: 0.9em;">MEDPIC Analysis</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="connection-line" style="height: 20px;"></div>
                                    
                                    <div class="node extract" data-node-id="26" style="transform: scale(0.8);">
                                        <div class="node-header">
                                            <div class="node-icon">🎯</div>
                                            <div>
                                                <div class="node-title" style="font-size: 0.9em;">External Rev Ops</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="node subzap" data-node-id="16" style="transform: scale(0.8); margin-bottom: 10px;">
                                        <div class="node-header">
                                            <div class="node-icon">🤝</div>
                                            <div>
                                                <div class="node-title">Customer Success</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="node subzap" data-node-id="17" style="transform: scale(0.8);">
                                        <div class="node-header">
                                            <div class="node-icon">🔧</div>
                                            <div>
                                                <div class="node-title">Other External</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div style="flex: 1;">
                                <div class="node filter" data-node-id="12" style="transform: scale(0.9);">
                                    <div class="node-header">
                                        <div class="node-icon">🏠</div>
                                        <div>
                                            <div class="node-title">Internal</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="branch-path">
                        <div class="path-label">
                            <div class="path-emoji" style="background: #3949AB; color: white;">F</div>
                            Writing & Knowledge
                        </div>
                        <div class="node filter" data-node-id="8">
                            <div class="node-header">
                                <div class="node-icon">📝</div>
                                <div>
                                    <div class="node-title">Writing & Knowledge Filter</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="branch-path">
                        <div class="path-label">
                            <div class="path-emoji" style="background: #8BC34A; color: white;">G</div>
                            Other
                        </div>
                        <div class="node filter" data-node-id="9">
                            <div class="node-header">
                                <div class="node-icon">📦</div>
                                <div>
                                    <div class="node-title">Other Teams Filter</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Detail Panel -->
        <div class="detail-panel" id="detailPanel">
            <div class="detail-header">
                <h3 id="detailTitle">Node Details</h3>
                <button class="close-btn" onclick="closeDetails()">×</button>
            </div>
            <div class="detail-content" id="detailContent">
                <!-- Dynamic content will be inserted here -->
            </div>
        </div>
    </div>

    <script>
        // Load the ZAP data
        const zapData = {
            "metadata": {"version": 2},
            "zaps": [{
                "id": 1,
                "title": "Meeting Core (WIP)",
                "nodes": {
                    "1": {
                        "id": 1,
                        "type_of": "read",
                        "action": "new_audio_transcript",
                        "selected_api": "ZoomCLIAPI@2.25.0",
                        "title": "Meeting Core (WIP)",
                        "meta": {"stepTitle": "New Audio Transcript"}
                    },
                    "2": {
                        "id": 2,
                        "type_of": "write",
                        "action": "extract_structured_data_responses_api",
                        "selected_api": "ChatGPTCLIAPI@2.38.0",
                        "meta": {"stepTitle": "Infer Metadata"},
                        "params": {
                            "model": "gpt-4.1",
                            "temperature": "0.0",
                            "prompt": "{{1__topic}}{{1__recording_files[]file_contents}}",
                            "description": "I want to infer what type of meeting or work was done in this transcript. It may be a meeting with other attendees, or a recording me working alone. My name is Ryan Rosztoczy and the companies I am working for are Mainstreet AI (AI consulting I founded), AI xOps (a newsletter by Mainstreet AI) and Organic Intelligence another newsletter. I may meet with prospects, clients, or a wide variety of other individuals.",
                            "arguments": ["Role", "Team", "External Company", "Internal Company", "Domain", "Internal or External", "Attendees", "Purpose"],
                            "description_Internal Company": "Identify which company of mine the transcript was recording work or a meeting for.",
                            "required_Internal Company": true,
                            "type_Internal Company": "string",
                            "enum_Internal Company": ["Other", "Cognitive Intelligence", "AI xOps", "Mainstreet AI"],
                            "description_Internal or External": "Is this work internal or externally facing (i.e. Mainstreet AI, AI xOps, Cognitive Intelligence only or did it include another party on the call)?",
                            "required_Internal or External": true,
                            "type_Internal or External": "string",
                            "enum_Internal or External": ["External", "Internal"],
                            "description_Attendees": "Who was on the call?",
                            "required_Attendees": true,
                            "type_Attendees": "string",
                            "required_Purpose": true,
                            "description_External Company": "Identify which external company the transcript was recording work or a meeting for (other than Mainstreet AI, Cognitive Intelligence, AI xOps, or Ryan personally). If this was an internal meeting, response with \"none\".",
                            "required_External Company": false,
                            "type_External Company": "string",
                            "type_Purpose": "string",
                            "enum_Domain": ["Business Operations", "Go‑to‑Market", "Innovation & R&D", "Leadership & Strategy", "Product & Technology", "Project & Program Management", "Revenue Operations", "Writing & Knowledge Management", "Other"],
                            "enum_Role": ["Administration", "Research", "Corporate Development", "Customer Success", "Data", "DevOps", "Engineering", "Executive / Founders", "Workplace", "Finance & Accounting", "IT", "Internal Communications", "Legal", "Marketing", "Project Planning", "HR", "Pricing", "Product Management", "Implementation", "QA", "RevOps", "Sales", "Security", "Support", "Documentation", "UX / Design", "Other"],
                            "enum_Team": ["Business Operations", "Leadership & Strategy", "Product & Technology", "Revenue Operations", "Writing & Knowledge Management", "Other"],
                            "description_Role": "Identify the high level role (for our company) of the meeting or work done in the transcript.",
                            "required_Role": true,
                            "type_Role": "string",
                            "description_Team": "Identify the high level team (for our company) based on the meeting or work done in the transcript.",
                            "required_Team": true,
                            "description_Domain": "Identify the high level domain (for our company) that the meeting or work in the transcript falls under.",
                            "required_Domain": true,
                            "type_Domain": "string"
                        }
                    },
                    "3": {
                        "id": 3,
                        "type_of": "write",
                        "action": "branch",
                        "meta": {"stepTitle": "Team-Based Branch"}
                    },
                    "4": {
                        "id": 4,
                        "type_of": "filter",
                        "meta": {"stepTitle": "Path A – Business Operations"},
                        "params": {
                            "filter_criteria": [{"key": "2__Team", "value": "Business Operations", "match": "icontains", "action": "continue"}]
                        }
                    },
                    "5": {
                        "id": 5,
                        "type_of": "filter",
                        "meta": {"stepTitle": "Path C – Leadership & Strategy"},
                        "params": {
                            "filter_criteria": [{"key": "2__Team", "value": "Leadership & Strategy", "match": "icontains", "action": "continue"}]
                        }
                    },
                    "6": {
                        "id": 6,
                        "type_of": "filter",
                        "meta": {"stepTitle": "Path D – Product & Technology"},
                        "params": {
                            "filter_criteria": [{"key": "2__Team", "value": "Product & Technology", "match": "icontains", "action": "continue"}]
                        }
                    },
                    "7": {
                        "id": 7,
                        "type_of": "filter",
                        "meta": {"stepTitle": "Path E – Revenue Operations"},
                        "params": {
                            "filter_criteria": [{"key": "2__Team", "value": "Revenue Operations", "match": "icontains", "action": "continue"}]
                        }
                    },
                    "8": {
                        "id": 8,
                        "type_of": "filter",
                        "meta": {"stepTitle": "Path F – Writing & Knowledge Management"},
                        "params": {
                            "filter_criteria": [{"key": "2__Team", "value": "Writing & Knowledge Management", "match": "icontains", "action": "continue"}]
                        }
                    },
                    "9": {
                        "id": 9,
                        "type_of": "filter",
                        "meta": {"stepTitle": "Path G – Other"},
                        "params": {
                            "filter_criteria": [{"key": "2__Team", "value": "Other", "match": "icontains", "action": "continue"}]
                        }
                    },
                    "10": {
                        "id": 10,
                        "type_of": "write",
                        "action": "branch",
                        "meta": {"stepTitle": "Internal/External Branch"}
                    },
                    "11": {
                        "id": 11,
                        "type_of": "filter",
                        "meta": {"stepTitle": "External Path"},
                        "params": {
                            "filter_criteria": [{"key": "2__Internal or External", "value": "External", "match": "icontains", "action": "continue"}]
                        }
                    },
                    "12": {
                        "id": 12,
                        "type_of": "filter",
                        "meta": {"stepTitle": "Internal Path"},
                        "params": {
                            "filter_criteria": [{"key": "2__Internal or External", "value": "Internal", "match": "icontains", "action": "continue"}]
                        }
                    },
                    "15": {
                        "id": 15,
                        "type_of": "filter",
                        "meta": {"stepTitle": "Sales Path"},
                        "params": {
                            "filter_criteria": [{"key": "2__Team", "value": "Sales", "match": "icontains", "action": "continue"}]
                        }
                    },
                    "16": {
                        "id": 16,
                        "type_of": "filter",
                        "meta": {"stepTitle": "Customer Success Path"},
                        "params": {
                            "filter_criteria": [{"key": "2__Team", "value": "Customer Success", "match": "icontains", "action": "continue"}]
                        }
                    },
                    "17": {
                        "id": 17,
                        "type_of": "filter",
                        "meta": {"stepTitle": "Other External Path"},
                        "params": {
                            "filter_criteria": [
                                {"key": "2__Team", "value": "Sales", "match": "icontains", "action": "stop"},
                                {"key": "2__Team", "value": "Customer Success", "match": "icontains", "action": "stop"}
                            ]
                        }
                    },
                    "22": {
                        "id": 22,
                        "type_of": "write",
                        "action": "call_subzap",
                        "meta": {"stepTitle": "Infer Revenue Operations Metadata"},
                        "params": {
                            "account_id": "19869823111",
                        }
                    },
                    "23": {
                        "id": 23,
                        "type_of": "write",
                        "action": "call_subzap",
                        "meta": {"stepTitle": "Infer Sales Metadata"},
                        "params": {
                            "account_id": "19869823111",

                        }
                    },
                    "24": {
                        "id": 24,
                        "type_of": "write",
                        "action": "extract_structured_data_responses_api",
                        "selected_api": "ChatGPTCLIAPI@2.38.0",
                        "meta": {"stepTitle": "Infer MEDPIC Data"},
                        "params": {
                            "model": "gpt-4.1",
                        }
                    },
                    "26": {
                        "id": 26,
                        "type_of": "write",
                        "action": "extract_structured_data_responses_api",
                        "selected_api": "ChatGPTCLIAPI@2.38.0",
                        "meta": {"stepTitle": "Infer External Revenue Operations Metadata"},
                        "params": {
                            "model": "gpt-4.1",
                        }
                    }
                }
            }]
        };

        // View navigation
        function navigateToView(viewId) {
            // If navigating back to library, clean up any focus overlay or highlights
            if (viewId === 'landing-view') {
                const overlay = document.querySelector('.focus-overlay');
                if (overlay) overlay.remove();
                document.querySelectorAll('.highlight').forEach(el => el.classList.remove('highlight'));
                document.querySelectorAll('.click-prompt').forEach(el => el.remove());
                document.querySelectorAll('.blurred-node').forEach(el => el.classList.remove('blurred-node'));
            }
            // Fade out current view
            const currentView = document.querySelector('.view.active');
            currentView.style.opacity = '0';
            
            setTimeout(() => {
                // Hide current view
                currentView.classList.remove('active');
                
                // Show new view
                const newView = document.getElementById(viewId);
                newView.classList.add('active');
                // Jump immediately to top of view (no smooth scroll)
                window.scrollTo({ top: 0, left: 0, behavior: 'auto' });
                
                // Fade in new view
                setTimeout(() => {
                    newView.style.opacity = '1';
                }, 50);
                
                // Initialize view-specific features for meeting view
                if (viewId === 'meeting-view') {
                    initializeWorkflowView();
                    // Highlight and prompt user to click the Infer Metadata node
                    setTimeout(() => {
                        const inferNode = document.querySelector('.node.extract');
                        if (inferNode) {
                            inferNode.scrollIntoView({ behavior: 'smooth', block: 'center' });
                            inferNode.classList.add('highlight');
                            const prompt = document.createElement('div');
                            prompt.className = 'click-prompt';
                            prompt.textContent = 'Click me';
                            inferNode.appendChild(prompt);

                            // Add overlay to dim the rest of the page
                            const overlay = document.createElement('div');
                            overlay.className = 'focus-overlay';
                            document.body.appendChild(overlay);
                            // Ensure the Infer Metadata node is above the overlay
                            // Ensure the Infer Metadata node sits above the overlay
                            inferNode.style.zIndex = '1000';

                            // Lock and obscure subcomponents after 'Revenue Ops Metadata'
                            const revenueNode = document.querySelector('.node[data-node-id="22"]');
                            if (revenueNode && revenueNode.parentNode) {
                                let found = false;
                                Array.from(revenueNode.parentNode.children).forEach(el => {
                                    if (found) {
                                        // Keep icon, replace title with ambiguous placeholder, and overlay lock
                                        el.classList.add('disabled');
                                        const titleEl = el.querySelector('.node-title');
                                        if (titleEl) {
                                            titleEl.textContent = '???';
                                        }
                                        const lockOverlay = document.createElement('div');
                                        lockOverlay.className = 'lock-overlay';
                                        const lockIcon = document.createElement('span');
                                        lockIcon.className = 'lock-icon';
                                        lockIcon.textContent = '🔒';
                                        lockOverlay.appendChild(lockIcon);
                                        el.appendChild(lockOverlay);
                                    }
                                    if (el === revenueNode) {
                                        found = true;
                                    }
                                });
                            }

                            // Lock placeholder sub-zap cards for other high-level branches (A, C, D, F, G)
                            ['4', '5', '6', '8', '9'].forEach(id => {
                                const branchNode = document.querySelector(`.node[data-node-id="${id}"]`);
                                if (branchNode && branchNode.parentNode) {
                                    const placeholder = branchNode.cloneNode(true);
                                    placeholder.classList.remove('filter');
                                    placeholder.classList.add('subzap', 'disabled');
                                    placeholder.style.transform = 'scale(0.8)';
                                    placeholder.style.marginTop = '10px';
                                    const titleEl = placeholder.querySelector('.node-title');
                                    if (titleEl) titleEl.textContent = '???';
                                    const lo = document.createElement('div');
                                    lo.className = 'lock-overlay';
                                    const li = document.createElement('span');
                                    li.className = 'lock-icon';
                                    li.textContent = '🔒';
                                    lo.appendChild(li);
                                    placeholder.appendChild(lo);
                                    branchNode.parentNode.appendChild(placeholder);
                                }
                            });
                        }
                    }, 300);
                }
            }, 500);
        }

        // Initialize workflow view
        function initializeWorkflowView() {
            // Set up node states and click handlers based on accessibility
            document.querySelectorAll('.node').forEach(node => {
                const nodeId = node.getAttribute('data-node-id');
                if (['1','2','3'].includes(nodeId)) {
                    // Only allowed nodes show details
                    node.addEventListener('click', function(e) {
                        e.stopPropagation();
                        showNodeDetails(nodeId);
                    });
                } else {
                    // Disabled nodes prompt login
                    node.classList.add('disabled');
                    node.addEventListener('click', function(e) {
                        e.stopPropagation();
                        showLoginModal();
                    });
                }
            });
        }

        // Show node details function
        function showNodeDetails(nodeId) {
            const node = zapData.zaps[0].nodes[nodeId];
            if (!node) return;

            // If clicking the Infer Metadata node, clean up the focus overlay and blurred nodes
            if (nodeId === '2') {
                const overlay = document.querySelector('.focus-overlay');
                if (overlay) overlay.remove();
                const inferElem = document.querySelector('.node.extract[data-node-id="2"]');
                if (inferElem) {
                    inferElem.style.zIndex = '';
                    inferElem.classList.remove('highlight');
                    const promptEl = inferElem.querySelector('.click-prompt');
                    if (promptEl) promptEl.remove();
                }
                document.querySelectorAll('.blurred-node').forEach(el => el.classList.remove('blurred-node'));
            }

            const panel = document.getElementById('detailPanel');
            const title = document.getElementById('detailTitle');
            const content = document.getElementById('detailContent');

            title.textContent = node.meta?.stepTitle || node.title || `Node ${nodeId}`;
            
            let html = `
                <div class="param-item">
                    <div class="param-key">Node ID</div>
                    <div class="param-value">${node.id}</div>
                </div>
                <div class="param-item">
                    <div class="param-key">Type</div>
                    <div class="param-value">${node.type_of}</div>
                </div>
                <div class="param-item">
                    <div class="param-key">Action</div>
                    <div class="param-value">${node.action || 'N/A'}</div>
                </div>
            `;

            if (node.selected_api) {
                html += `
                    <div class="param-item">
                        <div class="param-key">API</div>
                        <div class="param-value">${node.selected_api}</div>
                    </div>
                `;
            }

            if (node.params) {
                // Show main description if it exists
                if (node.params.description) {
                    html += `
                        <div class="param-item" style="background: #e3f2fd; border-left: 4px solid #2196F3;">
                            <div class="param-key">Description</div>
                            <div class="param-value" style="white-space: pre-wrap;">${node.params.description}</div>
                        </div>
                    `;
                }

                // Show prompt if it exists
                if (node.params.prompt) {
                    html += `
                        <div class="param-item">
                            <div class="param-key">Prompt Template</div>
                            <div class="param-value" style="font-family: monospace; font-size: 0.85em; white-space: pre-wrap;">${node.params.prompt}</div>
                        </div>
                    `;
                }

                // Show model if it exists
                if (node.params.model) {
                    html += `
                        <div class="param-item">
                            <div class="param-key">AI Model</div>
                            <div class="param-value">${node.params.model}</div>
                        </div>
                    `;
                }

                // Show arguments with detailed info
                if (node.params.arguments && node.params.arguments.length > 0) {
                    html += '<h4 style="margin-top: 20px; margin-bottom: 15px; color: #2196F3;">Extracted Fields</h4>';
                    
                    node.params.arguments.forEach(arg => {
                        const argKey = arg.replace(/\s+/g, ' ');
                        const descKey = `description_${argKey}`;
                        const typeKey = `type_${argKey}`;
                        const requiredKey = `required_${argKey}`;
                        const enumKey = `enum_${argKey}`;
                        
                        html += `<div style="border: 1px solid #e0e0e0; border-radius: 8px; padding: 15px; margin-bottom: 10px; background: #fafafa;">`;
                        html += `<div style="font-weight: 600; color: #1976D2; margin-bottom: 8px; font-size: 1.1em;">${arg}</div>`;
                        
                        if (node.params[descKey]) {
                            html += `<div style="margin-bottom: 8px; color: #666; line-height: 1.5;">${node.params[descKey]}</div>`;
                        }
                        
                        html += `<div style="display: flex; gap: 20px; flex-wrap: wrap; margin-top: 10px;">`;
                        
                        if (node.params[typeKey]) {
                            html += `<div><span style="font-weight: 600; color: #666;">Type:</span> <span style="background: #e3f2fd; padding: 2px 8px; border-radius: 4px;">${node.params[typeKey]}</span></div>`;
                        }
                        
                        if (node.params[requiredKey] !== undefined) {
                            const reqBadge = node.params[requiredKey] ? 
                                '<span style="background: #ff5252; color: white; padding: 2px 8px; border-radius: 4px;">Required</span>' : 
                                '<span style="background: #66BB6A; color: white; padding: 2px 8px; border-radius: 4px;">Optional</span>';
                            html += `<div>${reqBadge}</div>`;
                        }
                        
                        html += `</div>`;
                        
                        if (node.params[enumKey] && Array.isArray(node.params[enumKey])) {
                            html += `<div style="margin-top: 10px;">`;
                            html += `<div style="font-weight: 600; color: #666; margin-bottom: 5px;">Possible Values:</div>`;
                            html += `<div style="display: flex; flex-wrap: wrap; gap: 5px;">`;
                            node.params[enumKey].forEach(val => {
                                html += `<span style="background: #f5f5f5; border: 1px solid #ddd; padding: 4px 10px; border-radius: 16px; font-size: 0.9em;">${val}</span>`;
                            });
                            html += `</div></div>`;
                        }
                        
                        html += `</div>`;
                    });
                }

                // Show filter criteria
                if (node.params.filter_criteria) {
                    html += '<h4 style="margin-top: 20px; margin-bottom: 10px; color: #2196F3;">Filter Criteria</h4>';
                    html += `
                        <div class="param-item">
                            <div class="param-value">
                                ${node.params.filter_criteria.map(f => 
                                    `<div style="margin-bottom: 5px; padding: 8px; background: #f5f5f5; border-radius: 4px;">
                                        <span style="font-weight: 600;">${f.key}</span> 
                                        <span style="color: #666; margin: 0 5px;">${f.match}</span> 
                                        <span style="color: #2196F3;">"${f.value}"</span>
                                        ${f.action ? `<span style="margin-left: 10px; color: #666;">(${f.action})</span>` : ''}
                                    </div>`
                                ).join('')}
                            </div>
                        </div>
                    `;
                }

                // Show sub-zap parameters
                if (node.action === 'call_subzap' && node.params.zap_id) {
                    html += '<h4 style="margin-top: 20px; margin-bottom: 10px; color: #2196F3;">Sub-Zap Configuration</h4>';
                    const subZapParams = Object.keys(node.params).filter(key => 
                        !['account_id', 'zap_id'].includes(key)
                    );
                    
                    if (subZapParams.length > 0) {
                        html += '<div style="background: #f5f5f5; padding: 10px; border-radius: 8px;">';
                        html += '<div style="font-weight: 600; margin-bottom: 10px;">Parameters passed to Sub-Zap:</div>';
                        subZapParams.forEach(key => {
                            html += `
                                <div style="margin-bottom: 5px;">
                                    <span style="font-weight: 600; color: #1976D2;">${key}:</span> 
                                    <span style="color: #666;">${node.params[key]}</span>
                                </div>
                            `;
                        });
                        html += '</div>';
                    }
                }
            }

            content.innerHTML = html;
            panel.classList.add('show');
        }

        // Close details panel
        function closeDetails() {
            document.getElementById('detailPanel').classList.remove('show');
        }


        // Close panel when clicking outside
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.node') && !e.target.closest('.detail-panel')) {
                closeDetails();
            }
        });
    </script>
    <!-- Login prompt modal -->
    <div id="login-modal" class="modal hidden" onclick="hideLoginModal()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <span class="modal-close" onclick="hideLoginModal()">×</span>
            <p>Log in to continue</p>
            <button class="modal-login-button" onclick="hideLoginModal()">Log In</button>
        </div>
    </div>
    <script>
    function showLoginModal() {
        document.getElementById('login-modal').classList.remove('hidden');
    }
    function hideLoginModal() {
        document.getElementById('login-modal').classList.add('hidden');
    }
    document.querySelectorAll('.product-card.coming-soon').forEach(function(card) {
        card.onclick = showLoginModal;
    });
    </script>
</body>
</html>